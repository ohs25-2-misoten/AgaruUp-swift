# ショート動画機能のアーキテクチャ

```
┌─────────────────────────────────────────────┐
│           AgaruUpApp                        │
│           (Entry Point)                     │
└───────────────┬─────────────────────────────┘
                │
                ▼
┌─────────────────────────────────────────────┐
│           ContentView                       │
│           (TabView Container)               │
└───────┬───────────────────┬─────────────────┘
        │                   │
        ▼                   ▼
┌───────────────────┐  ┌──────────────────────┐
│ ShortVideoScroll  │  │  NavigationStack     │
│     View          │  │  (Items List)        │
│ (動画タブ)        │  │  (リストタブ)        │
└────────┬──────────┘  └──────────────────────┘
         │
         │ TabView + PageTabViewStyle
         │
         ▼
┌─────────────────────────────────────────────┐
│         VideoPlayerView                     │
│         (各動画の再生)                      │
│  ┌──────────────────────────────────────┐  │
│  │         AVPlayer                     │  │
│  │      (動画再生エンジン)              │  │
│  └──────────────────────────────────────┘  │
│  ┌──────────────────────────────────────┐  │
│  │      VideoModel                      │  │
│  │    (動画データ)                      │  │
│  │  - url: URL                          │  │
│  │  - title: String                     │  │
│  │  - description: String               │  │
│  └──────────────────────────────────────┘  │
└─────────────────────────────────────────────┘
```

## コンポーネント説明

### 1. VideoModel
- 動画データを表現する構造体
- サンプルデータを提供
- 独立したモデル層

### 2. VideoPlayerView
- 個別の動画を再生
- AVPlayerを使用
- ループ再生機能
- オーバーレイUI

### 3. ShortVideoScrollView
- 複数の動画をページング
- 縦スクロール
- スナップ動作
- インデックス表示

### 4. ContentView
- アプリのメインビュー
- タブナビゲーション
- 動画タブとリストタブの管理

## データフロー

```
サンプル動画データ
       ↓
 VideoModel.sampleVideos
       ↓
ShortVideoScrollView
       ↓
 ForEach(videos)
       ↓
VideoPlayerView(video)
       ↓
   AVPlayer(url)
       ↓
   動画再生
```

## 状態管理

- **TCA不使用**: シンプルな@State管理
- **ライフサイクル**: onAppear/onDisappear
- **自動再生**: NotificationCenterで終了検知
- **メモリ管理**: onDisappearでクリーンアップ
